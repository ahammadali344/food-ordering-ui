<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Order Details | CampusEats</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="logo">CampusEats</div>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="index.html#menu">Food Items</a></li>
    <li><a href="order.html" class="active">Cart</a></li>
  </ul>
</nav>

<!-- ORDER PAGE -->
<section class="order-page">

  <!-- HEADER -->
  <div class="order-header">
    <h1>Order Details</h1>
    <a href="index.html" class="back-btn">‚Üê Continue Shopping</a>
  </div>

  <!-- CONTENT -->
  <div class="order-container">

    <!-- LEFT: ITEMS -->
    <div class="order-items">
      <h2>Your Items</h2>
      <div id="cartItems"></div>
    </div>

    <!-- RIGHT: SUMMARY -->
    <div class="order-summary">
      <h2>Price Summary</h2>

      <div class="summary-row">
        <span>Subtotal</span>
        <span id="subtotal">‡ß≥0</span>
      </div>

      <div class="summary-row">
        <span>Delivery</span>
        <span id="delivery">‡ß≥60</span>
      </div>

      <div class="summary-row">
        <span>VAT (5%)</span>
        <span id="vat">‡ß≥0</span>
      </div>

      <hr>

      <div class="summary-total">
        <span>Total</span>
        <span id="total">‡ß≥0</span>
      </div>

      <button class="place-order-btn" onclick="placeOrder()">
        Place Order
      </button>
    </div>

  </div>
</section>

<!-- FOOTER -->
<footer>
  <p>¬© 2026 CampusEats</p>
  <p>Inspired by Bangladeshi food culture</p>
</footer>

<!-- SCRIPT -->
<script>
let cart = JSON.parse(localStorage.getItem("cart")) || [];
const deliveryFee = 60;
const vatRate = 0.05;

function renderCart(){
  const cartItemsDiv = document.getElementById("cartItems");
  cartItemsDiv.innerHTML = "";

  if(cart.length === 0){
    cartItemsDiv.innerHTML = "<p>Your cart is empty.</p>";
    updateSummary();
    return;
  }

  cart.forEach((item, index) => {
    const div = document.createElement("div");
    div.className = "cart-item";

    const itemTotal = item.price * item.qty;

    div.innerHTML = `
      <div class="item-left">
        <img src="assets/images/pizza.jpg" alt="${item.name}">
        <div>
          <h4>${item.name}</h4>
          <small>‡ß≥${item.price} each</small>
        </div>
      </div>

      <div class="item-actions">
        <button onclick="changeQty(${index}, -1)">‚àí</button>
        <span>${item.qty}</span>
        <button onclick="changeQty(${index}, 1)">+</button>
      </div>

      <div class="item-price">
        ‡ß≥${itemTotal}
      </div>

      <button class="remove-btn" onclick="removeItem(${index})">‚úï</button>
    `;

    cartItemsDiv.appendChild(div);
  });

  updateSummary();
}

function changeQty(index, change){
  cart[index].qty += change;
  if(cart[index].qty <= 0){
    cart.splice(index, 1);
  }
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

function removeItem(index){
  cart.splice(index, 1);
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

function updateSummary(){
  let subtotal = cart.reduce((sum, i) => sum + i.price * i.qty, 0);
  let vat = Math.round(subtotal * vatRate);
  let total = subtotal + vat + (cart.length ? deliveryFee : 0);

  document.getElementById("subtotal").innerText = "‡ß≥" + subtotal;
  document.getElementById("vat").innerText = "‡ß≥" + vat;
  document.getElementById("total").innerText = "‡ß≥" + total;
}

function placeOrder(){
  if(cart.length === 0){
    alert("Your cart is empty!");
    return;
  }

  alert("üéâ Order placed successfully!");
  localStorage.removeItem("cart");
  location.href = "index.html";
}

renderCart();
</script>

</body>
</html>
